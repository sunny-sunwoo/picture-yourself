<html>

<head>
<title>CTRL-Labs websocket test</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<script src="https://cdn.socket.io/socket.io-1.3.5.js"></script>
<script>

//Room 2404
var leftFront_x = -0.106;
var leftFront_z = 1.205;
var leftBack_x  = -0.119;
var leftBack_z  = 0.9;

var rightFront_x = 0.323;
var rightFront_z = 1.194;
var rightBack_x  = 0.336;
var rightBack_z  = 1.607;

//CAVE
/*
    var leftFront_x = -0.106;
    var leftFront_z = 2.0;
    var leftBack_x = -0.119;
    var leftBack_z = 2.6;

    var rightFront_x = 0.5;
    var rightFront_z = 2.0;
    var rightBack_x = 0.5;
    var rightBack_z = 2.7;
*/

var squareNumber;
var socket = io.connect('http://127.0.0.1:8000');
socket.on('bodyFrame', function(bodyFrame){
//console.log("On");
   for(var i = 0;  i < bodyFrame.bodies.length; i++) {
            if(bodyFrame.bodies[i].tracked) {
                //console.log("X:"+bodyFrame.bodies[i].joints[1].cameraX);
                //console.log("Z:"+bodyFrame.bodies[i].joints[1].cameraZ);
            
                var x = bodyFrame.bodies[i].joints[1].cameraX;
                var z = bodyFrame.bodies[i].joints[1].cameraZ;

                if (x <= leftFront_x)
                {
                    //if (z <= leftFront_z) //1.205
                    if (z <= leftBack_z) //0.587
                        squareNumber = 0;
                    //else if (z > leftFront_z && z <= leftBack_z) //1.205, 0.587
                    else if (z > leftBack_z && z <= leftFront_z) //0.587, 1.205
                        squareNumber = 3;
                    //else if (z > leftBack_z) //0.587
                    else if (z > leftFront_z) //1.205
                        squareNumber = 6;
                }
                else if (x > leftFront_x && x < rightFront_x)
                {
                    //if (z <= leftFront_z)
                    if (z <= leftBack_z)
                        squareNumber = 1;
                    //else if (z > leftFront_z && z <= leftBack_z)
                    else if (z > leftBack_z && z <= leftFront_z)
                        squareNumber = 4;
                    //else if (z > leftBack_z)
                    else if (z > leftFront_z)
                        squareNumber = 7;
                }        
                else if (x >= rightFront_x)
                {
                    //if (z <= leftFront_z)
                    if (z <= leftBack_z)
                        squareNumber = 2;
                    //else if (z > leftFront_z && z <= leftBack_z)
                    else if (z > leftBack_z && z <= leftFront_z)
                        squareNumber = 5;
                    //else if (z > leftBack_z)
                    else if (z > leftFront_z)
                        squareNumber = 8;
                }      

                document.getElementById("pk").innerHTML = squareNumber;
            
            }
        }
    });
 
</script>
</head>

<body>
<p>Do Gesture</p>
<p id = "pk">X</p>

</body>


</html>